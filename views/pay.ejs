


<html>
    <head>
     <title>payment</title>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     <script src='https://js.paystack.co/v1/inline.js'></script> 
    </head>
    <style type="text/css">
        body{
            background-color:#CCC;
        }
		input, button {
			margin: 2px;
			padding: 10px;
		}
		button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        }
        input,select{
            width:50%;
        }
        ul{
            margin-top:10%;
        }
        @media only screen and (max-width: 320px) {
            body {
                
            }
            input,{
            width:80%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}    
        }
        @media only screen and (max-width: 384px) {
            body {
                
            }
            input{
            width:80%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}     
}
@media only screen and (max-width: 360px) {
            /* body {
                
            } */
            input,select{
            width:80%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:30px;
            padding-left:4%;
            padding-right:4%;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:90%;
            height:90%;
		}     
}
@media only screen and (max-width: 684px) {
            body {
               
            }
            input{
            width:50%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}     
}
@media only screen and (max-width: 720px) {
            body {
               
            }
            input{
            width:50%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        } 
        ul{
            padding-top:20%;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}   
}
@media only screen and (max-width: 820px) {
            
            input{
            width:50%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        } 
        ul{
            padding-top:20%;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}   
}
@media only screen and (max-width: 1020px) {
            body {
               
            }
            input{
            width:50%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        } 
        ul{
            padding-top:20%;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}   
}
@media only screen and (max-width: 1020px) {
            body {
               
            }
            input{
            width:50%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        } 
        ul{
            padding-top:20%;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}   
}
@media only screen and (max-width: 1050px) {
            body {
               
            }
            input{
            width:50%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        } 
        ul{
            padding-top:20%;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}   
}
@media only screen and (max-width: 412px) {
            body {
               
            }
            input{
            width:100%;
        }
        ul, li{
            list-style:none;
            text-align: center;
            padding-top:10px;
        } 
        ul{
            padding-top:20%;
        }
        button {
			background-color: rgb(123, 123, 123);
            border-radius:4px;
			color: white;
			border: 0px;
			cursor: pointer;
            width:20%;
            height:20%;
		}   
}
	</style>
    <body>
        <div></div>
        <ul><code>
                please reload to make sure transaction is well received
            </code>
            <li><input type="email" placeholder="email" required class="" id="email"/></li>
            <li> <select id="languages">
                <option value="French">French</option>
                <option value="Spanish">Spanish</option>
                <option value="English">English</option>
                <option value="Yoruba">Yoruba</option>
                <option value="Igbo">Igbo</option>
              </select>
            <li><select id="level">
                <option value="Intermediate">Intermediate</option>
                <option value="Beginner">Beginner</option>
              </select></li>
            <li><button>Make Payment</button></li>
        </ul>
        

        <script type="text/javascript">
         const Email = $("#email").val();
         const language = $( "#languages option:selected" ).text();
         const level = $( "#level option:selected" ).text();
         

        
        //  const Email ="oghenerukevwejeff@gmail.com";
         const show = Math.floor(Math.random() * 6) + 1 + 2000 + Math.random();
        function submitusercredentials(
			DATA = { 
              language:language,
              level:level,
              email:Email,
              show:show
              }, URL) {
				var URL = `https://brents-url-olango.herokuapp.com/payingcustomers`;
				$.ajax({
					url: URL,
					type: "POST",
					crossDomain: true,
					dataType: 'jain',
					processData: false,
					beforeSend:  (xhr) => {
						xhr.setRequestHeader("Content-Type", "application/json");
						xhr.setRequestHeader("Accept", "application/json");
					},
					data: JSON.stringify(DATA,null,2),
					success:(response)=> {
						console.log('this is the response point where am trin to know'+JSON.stringify(response, null, 2));
					},
					error:(response)=> {
						console.log(response);
					}
				});
				console.log(`this is the json data sent to the api for signup action:::: ${JSON.stringify(DATA, null, 2)}`);
			}
            
            function makepayment(key,Language,Level,email, amount,ref, callback) {
                var handler = PaystackPop.setup({
                    key: key, // This is your public key only! 
                    email: email || Email, // Customers email
                    amount: amount || 5000000.00, // The amount charged, I like big money lol
                    ref: ref ||show, // Generate a random reference number and put here",
                    metadata: { // More custom information about the transaction
                     custom_fields: [
                        {
                            language:language,
                            level:level
                        }
                     ]
                    },
                    callback: callback || function(response){
                        console.log("responses"+JSON.stringify(response,null,2))

                        //make the api call here
                    //   let div = document.getElementsByTagName("div")[0] 
                    //   div.innerHTML = "This was the json response reference </br />" + response.reference;
                    submitusercredentials();
                    
                    console.log(">>>>>>>>>>>>"+JSON.stringify(response,null,2))
                        
                    },
                    onClose: function(){
                      alert('click ok button ');
                    }
                });
                // Payment Request Just Fired  
                handler.openIframe(); 
            }
            let dom = document.getElementsByTagName("button")[0];
            dom.addEventListener("click", function() {
                makepayment("pk_live_7172777765e8e0fa2e80de871f3196a57d150323") // edit this and input your public key .. This is mine, please pay in ony big money lol
            });
        </script>
        <script>
            
           
        </script>
    </html>
    </body>
  </html>
  